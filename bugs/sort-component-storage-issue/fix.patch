diff --git a/pages/todobooks/components/task/TaskSortPicker.vue b/pages/todobooks/components/task/TaskSortPicker.vue
index 39ab96e..166940d 100644
--- a/pages/todobooks/components/task/TaskSortPicker.vue
+++ b/pages/todobooks/components/task/TaskSortPicker.vue
@@ -114,8 +114,8 @@ const selectSort = (option) => {
 
 // ç¡®è®¤é€‰æ‹©
 const confirm = () => {
-  console.log('ç¡®è®¤æ’åºé€‰æ‹©:', tempSelectedSort.value)
-  saveSortToLocal(tempSelectedSort.value)
+  console.log('ğŸ¯ ç¡®è®¤æ’åºé€‰æ‹©:', JSON.stringify(tempSelectedSort.value, null, 2))
+  console.log('ğŸ¯ è§¦å‘confirmäº‹ä»¶ï¼Œä¼ é€’æ•°æ®:', JSON.stringify(tempSelectedSort.value, null, 2))
   emit('confirm', tempSelectedSort.value)
 }
 
@@ -127,46 +127,6 @@ const cancel = () => {
   emit('cancel')
 }
 
-// æœ¬åœ°å­˜å‚¨ç›¸å…³å‡½æ•°
-const getSortStorageKey = () => {
-  const userId = currentUserId.value
-  if (!userId || !props.todorbookId) return null
-  return `task_sort_${userId}_${props.todorbookId}`
-}
-
-const saveSortToLocal = (sortOption) => {
-  try {
-    const storageKey = getSortStorageKey()
-    if (storageKey) {
-      const sortData = {
-        sortOption: sortOption,
-        timestamp: Date.now()
-      }
-      uni.setStorageSync(storageKey, JSON.stringify(sortData))
-      console.log('æ’åºåå¥½å·²ä¿å­˜åˆ°æœ¬åœ°:', storageKey, sortData)
-    }
-  } catch (error) {
-    console.error('ä¿å­˜æ’åºåå¥½å¤±è´¥:', error)
-  }
-}
-
-const loadSortFromLocal = () => {
-  try {
-    const storageKey = getSortStorageKey()
-    if (storageKey) {
-      const sortDataStr = uni.getStorageSync(storageKey)
-      if (sortDataStr) {
-        const sortData = JSON.parse(sortDataStr)
-        console.log('ä»æœ¬åœ°åŠ è½½æ’åºåå¥½:', storageKey, sortData)
-        return sortData.sortOption || getDefaultSort()
-      }
-    }
-  } catch (error) {
-    console.error('åŠ è½½æ’åºåå¥½å¤±è´¥:', error)
-  }
-  return getDefaultSort()
-}
-
 const getDefaultSort = () => {
   return { field: 'created_at', order: 'desc' }
 }
@@ -185,19 +145,12 @@ watch(currentUserId, (newUserId, oldUserId) => {
   }
 }, { immediate: false })
 
-// ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æœ¬åœ°å­˜å‚¨çš„æ’åºåå¥½
+// ç»„ä»¶æŒ‚è½½æ—¶åŒæ­¥å½“å‰æ’åºçŠ¶æ€
 onMounted(() => {
-  const localSort = loadSortFromLocal()
-  console.log('TaskSortPicker: ç»„ä»¶æŒ‚è½½ï¼ŒåŠ è½½æœ¬åœ°æ’åºåå¥½:', localSort)
-  
-  // åªè®¾ç½®ä¸´æ—¶é€‰æ‹©çŠ¶æ€ï¼Œä¸è‡ªåŠ¨ç¡®è®¤
-  if (localSort) {
-    tempSelectedSort.value = localSort
-    console.log('TaskSortPicker: å·²åŠ è½½æœ¬åœ°å­˜å‚¨åå¥½åˆ°ä¸´æ—¶çŠ¶æ€')
-  } else {
-    tempSelectedSort.value = { ...props.currentSort }
-    console.log('TaskSortPicker: ä½¿ç”¨å½“å‰æ’åºåå¥½')
-  }
+  console.log('ğŸš€ TaskSortPickerç»„ä»¶æŒ‚è½½')
+  console.log('ğŸš€ å½“å‰props.currentSort:', JSON.stringify(props.currentSort, null, 2))
+  tempSelectedSort.value = { ...props.currentSort }
+  console.log('ğŸš€ ç»„ä»¶æŒ‚è½½å®Œæˆï¼ŒtempSelectedSortå·²åŒæ­¥:', JSON.stringify(tempSelectedSort.value, null, 2))
 })
 </script>
 
diff --git a/pages/todobooks/composables/useTaskData.js b/pages/todobooks/composables/useTaskData.js
index 5f00dde..a843fc0 100644
--- a/pages/todobooks/composables/useTaskData.js
+++ b/pages/todobooks/composables/useTaskData.js
@@ -5,6 +5,7 @@ import { calculateUnreadCount } from '@/utils/commentUtils.js'
 import { API_CODES, ERROR_MESSAGES, TASK_CONSTANTS } from '@/pages/todobooks/utils/constants.js'
 import { store } from '@/uni_modules/uni-id-pages/common/store.js'
 import { getGlobalCommentCache } from '@/pages/todobooks/composables/useTaskCommentCache.js'
+import { currentUserId } from '@/store/storage.js'
 
 /**
  * æŒ‰æ ‡ç­¾ç­›é€‰ä»»åŠ¡
@@ -247,7 +248,47 @@ function searchTasks(tasks, keyword) {
  * @param {Object} allTasks - æ‰€æœ‰ä»»åŠ¡æ•°æ®çš„å“åº”å¼å¼•ç”¨
  * @returns {Object} ä»»åŠ¡æ•°æ®å’Œæ“ä½œæ–¹æ³•
  */
-export function useTaskData(bookId, allTasks = null, bookData = null) {
+/**
+ * è·å–æ’åºå­˜å‚¨é”®
+ * @param {string} userId - ç”¨æˆ·ID
+ * @param {string} bookId - é¡¹ç›®å†ŒID
+ * @returns {string|null} å­˜å‚¨é”®
+ */
+function getSortStorageKey(userId, bookId) {
+  if (!userId || !bookId) return null
+  return `task_sort_${userId}_${bookId}`
+}
+
+/**
+ * ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ’åºåå¥½
+ * @param {string} bookId - é¡¹ç›®å†ŒID
+ * @returns {Object} æ’åºé€‰é¡¹
+ */
+function loadSortFromStorage(bookId) {
+  try {
+    const userId = currentUserId.value
+    const storageKey = getSortStorageKey(userId, bookId)
+    
+    if (storageKey) {
+      const sortDataStr = uni.getStorageSync(storageKey)
+      if (sortDataStr) {
+        const sortData = JSON.parse(sortDataStr)
+        console.log('ğŸ¯ useTaskDataä»æœ¬åœ°åŠ è½½æ’åºåå¥½:', JSON.stringify(sortData.sortOption, null, 2))
+        return sortData.sortOption || { field: 'created_at', order: 'desc' }
+      }
+    }
+  } catch (error) {
+    console.error('useTaskDataåŠ è½½æ’åºåå¥½å¤±è´¥:', error)
+  }
+  
+  console.log('ğŸ¯ useTaskDataä½¿ç”¨é»˜è®¤æ’åºåå¥½')
+  return { field: 'created_at', order: 'desc' }
+}
+
+export function useTaskData(initialBookId, allTasks = null, bookData = null) {
+  // å­˜å‚¨å½“å‰çš„bookIdï¼Œæ”¯æŒè¿è¡Œæ—¶æ›´æ–°
+  const currentBookId = ref(initialBookId)
+  
   // å“åº”å¼æ•°æ®
   const tasks = ref([])
   const loading = ref(false)
@@ -256,6 +297,7 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
   const searchKeyword = ref('')
   const selectedTags = ref([])
   const cachedAvailableTags = ref([])
+  // åˆå§‹åŒ–ä¸ºé»˜è®¤æ’åºï¼Œç¨åé€šè¿‡initializeSortFromStorageè®¾ç½®
   const currentSort = ref({ field: 'created_at', order: 'desc' })
   
   // è®¡ç®—å±æ€§
@@ -351,7 +393,7 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
    * @param {boolean} forceRefresh - æ˜¯å¦å¼ºåˆ¶åˆ·æ–°
    */
   const loadAvailableTags = async (forceRefresh = false) => {
-    if (!bookId) {
+    if (!currentBookId.value) {
       console.warn('loadAvailableTags: bookId is required')
       return
     }
@@ -361,11 +403,11 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
       const sourceData = allTasks?.value || tasks.value
       if (Array.isArray(sourceData) && sourceData.length > 0) {
         // å…ˆç¼“å­˜ä»»åŠ¡æ•°æ®åˆ°æ ‡ç­¾æœåŠ¡
-        tagService.cacheTaskData(bookId, sourceData)
+        tagService.cacheTaskData(currentBookId.value, sourceData)
       }
       
       // ä½¿ç”¨æ ‡ç­¾æœåŠ¡è·å–æ ‡ç­¾ï¼ˆæ”¯æŒç¼“å­˜ï¼‰
-      const tags = await tagService.getBookTagsForFilter(bookId, sourceData, forceRefresh)
+      const tags = await tagService.getBookTagsForFilter(currentBookId.value, sourceData, forceRefresh)
       cachedAvailableTags.value = tags
       console.log('å·²ç¼“å­˜å¯ç”¨æ ‡ç­¾:', tags.length, 'ä¸ª')
     } catch (error) {
@@ -442,7 +484,7 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
       // await loadTasksCommentCounts(processedTasks)
       
       // å¼‚æ­¥åŠ è½½å¹¶ç¼“å­˜æ ‡ç­¾æ•°æ®
-      if (bookId) {
+      if (currentBookId.value) {
         loadAvailableTags()
       }
       
@@ -716,13 +758,49 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
   }
 
   /**
-   * è®¾ç½®æ’åºé€‰é¡¹
+   * ä¿å­˜æ’åºé€‰é¡¹åˆ°æœ¬åœ°å­˜å‚¨
+   * @param {Object} sortOption - æ’åºé€‰é¡¹
+   */
+  const saveSortToStorage = (sortOption) => {
+    try {
+      const userId = currentUserId.value
+      const storageKey = getSortStorageKey(userId, currentBookId.value)
+      
+      if (storageKey) {
+        const sortData = {
+          sortOption: sortOption,
+          timestamp: Date.now()
+        }
+        console.log('ğŸ’¾ useTaskDataä¿å­˜æ’åºåå¥½:', JSON.stringify(sortData, null, 2))
+        uni.setStorageSync(storageKey, JSON.stringify(sortData))
+        console.log('âœ… useTaskDataæ’åºåå¥½å·²ä¿å­˜åˆ°æœ¬åœ°:', storageKey)
+      } else {
+        console.log('âŒ useTaskDataä¿å­˜å¤±è´¥ - æ— æ³•ç”Ÿæˆå­˜å‚¨é”®')
+      }
+    } catch (error) {
+      console.error('âŒ useTaskDataä¿å­˜æ’åºåå¥½å¤±è´¥:', error)
+    }
+  }
+
+  /**
+   * è®¾ç½®æ’åºé€‰é¡¹å¹¶ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
    * @param {Object} sortOption - æ’åºé€‰é¡¹ { field, order }
    */
   const setSortOption = (sortOption) => {
+    console.log('ğŸ”„ useTaskDataæ¥æ”¶æ’åºé€‰é¡¹:', JSON.stringify(sortOption, null, 2))
     if (sortOption && sortOption.field && sortOption.order) {
-      currentSort.value = { ...sortOption }
-      console.log('è®¾ç½®æ’åºé€‰é¡¹:', currentSort.value)
+      // åªä¿ç•™æ’åºç›¸å…³çš„å­—æ®µï¼Œç§»é™¤UIç›¸å…³å­—æ®µ
+      const cleanSortOption = {
+        field: sortOption.field,
+        order: sortOption.order
+      }
+      currentSort.value = { ...cleanSortOption }
+      console.log('âœ… useTaskDataè®¾ç½®æ’åºé€‰é¡¹æˆåŠŸ:', JSON.stringify(currentSort.value, null, 2))
+      
+      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
+      saveSortToStorage(cleanSortOption)
+    } else {
+      console.log('âŒ useTaskDataæ’åºé€‰é¡¹éªŒè¯å¤±è´¥ - æ•°æ®æ ¼å¼é”™è¯¯:', JSON.stringify(sortOption, null, 2))
     }
   }
 
@@ -829,8 +907,8 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
     currentSort.value = { field: 'created_at', order: 'desc' }
     
     // æ¸…é™¤æ ‡ç­¾æœåŠ¡ä¸­çš„ç¼“å­˜
-    if (bookId) {
-      tagService.clearBookCache(bookId)
+    if (currentBookId.value) {
+      tagService.clearBookCache(currentBookId.value)
     }
     
     // æ¸…é™¤è¯„è®ºç¼“å­˜
@@ -929,6 +1007,39 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
     }
   }
   
+  /**
+   * æ›´æ–°å½“å‰bookId
+   * @param {string} newBookId - æ–°çš„é¡¹ç›®å†ŒID
+   */
+  const updateBookId = (newBookId) => {
+    console.log('ğŸ“ æ›´æ–°bookId:', { old: currentBookId.value, new: newBookId })
+    currentBookId.value = newBookId
+  }
+  
+  /**
+   * åˆå§‹åŒ–æ’åºçŠ¶æ€ï¼Œä»æœ¬åœ°å­˜å‚¨åŠ è½½åå¥½
+   * éœ€è¦åœ¨bookIdå’ŒcurrentUserIdéƒ½å‡†å¤‡å¥½åè°ƒç”¨
+   */
+  const initializeSortFromStorage = () => {
+    console.log('ğŸš€ åˆå§‹åŒ–æ’åºçŠ¶æ€ - bookId:', currentBookId.value, 'currentUserId:', currentUserId.value)
+    
+    if (!currentBookId.value || !currentUserId.value) {
+      console.log('âš ï¸ åˆå§‹åŒ–æ’åºè·³è¿‡ - ç¼ºå°‘å¿…è¦å‚æ•°')
+      return
+    }
+    
+    const savedSort = loadSortFromStorage(currentBookId.value)
+    console.log('ğŸš€ åŠ è½½åˆ°çš„æ’åºåå¥½:', JSON.stringify(savedSort, null, 2))
+    
+    // åªæœ‰å½“åŠ è½½çš„æ’åºä¸å½“å‰ä¸åŒæ—¶æ‰æ›´æ–°
+    if (savedSort.field !== currentSort.value.field || savedSort.order !== currentSort.value.order) {
+      currentSort.value = { ...savedSort }
+      console.log('âœ… æ’åºçŠ¶æ€å·²æ›´æ–°:', JSON.stringify(currentSort.value, null, 2))
+    } else {
+      console.log('ğŸš€ æ’åºçŠ¶æ€æ— éœ€æ›´æ–°')
+    }
+  }
+  
   return {
     // å“åº”å¼æ•°æ®
     tasks,
@@ -957,6 +1068,8 @@ export function useTaskData(bookId, allTasks = null, bookData = null) {
     setSearchKeyword,
     setSelectedTags,
     setSortOption,
+    updateBookId,
+    initializeSortFromStorage,
     resetState,
     updateTaskOptimistic,
     createTaskOptimistic,
diff --git a/pages/todobooks/detail.vue b/pages/todobooks/detail.vue
index 28f0f99..538878f 100644
--- a/pages/todobooks/detail.vue
+++ b/pages/todobooks/detail.vue
@@ -104,6 +104,7 @@ import TodoBookActionSheet from '@/pages/todobooks/components/TodoBookActionShee
 import { useBookData } from '@/pages/todobooks/composables/useBookData.js'
 import { useTaskData } from '@/pages/todobooks/composables/useTaskData.js'
 import { usePinning } from '@/composables/usePinning.js'
+import { currentUserId } from '@/store/storage.js'
 
 // ç”¨äºå­˜å‚¨ä»è·¯ç”±è·å–çš„ bookIdï¼Œåˆå§‹ä¸º null
 let bookId = null
@@ -139,6 +140,8 @@ const {
   setSearchKeyword,
   setSelectedTags,
   setSortOption,
+  updateBookId,
+  initializeSortFromStorage,
   taskStats,
   overallProgress,
   toggleTaskStatus,
@@ -160,6 +163,20 @@ const {
 watch(availableTags, (newTags) => {
 }, { deep: true, immediate: true })
 
+// ç›‘å¬ç”¨æˆ·åˆ‡æ¢ï¼Œé‡æ–°åˆå§‹åŒ–æ’åºçŠ¶æ€
+watch(currentUserId, (newUserId, oldUserId) => {
+  if (newUserId && oldUserId && newUserId !== oldUserId && bookId) {
+    console.log('ğŸ‘¤ ç”¨æˆ·åˆ‡æ¢ï¼Œé‡æ–°åˆå§‹åŒ–æ’åºçŠ¶æ€', { oldUserId, newUserId, bookId })
+    // ç”¨æˆ·åˆ‡æ¢åé‡æ–°åˆå§‹åŒ–æ’åºçŠ¶æ€
+    initializeSortFromStorage()
+  }
+  if (newUserId && !oldUserId && bookId) {
+    console.log('ğŸ‘¤ ç”¨æˆ·IDç°åœ¨å¯ç”¨ï¼Œåˆå§‹åŒ–æ’åºçŠ¶æ€', { newUserId, bookId })
+    // ä»æ— ç”¨æˆ·IDåˆ°æœ‰ç”¨æˆ·IDï¼Œåˆå§‹åŒ–æ’åºçŠ¶æ€
+    initializeSortFromStorage()
+  }
+}, { immediate: false })
+
 // å½’æ¡£çŠ¶æ€æ£€æµ‹
 const isArchived = computed(() => {
   return bookData.value?.is_archived === true || isFromArchive
@@ -192,10 +209,16 @@ onLoad(async (options) => {
     // æ£€æŸ¥æ˜¯å¦ä»å½’æ¡£ç®¡ç†é¡µé¢è¿›å…¥
     isFromArchive = options.from === 'archive' || options.archived === 'true'
     
+    // æ›´æ–°useTaskDataä¸­çš„bookId
+    updateBookId(bookId)
+    
     // å…ˆåŠ è½½é¡¹ç›®å†Œè¯¦æƒ…ï¼ˆåŒ…å«ä»»åŠ¡æ•°æ®ï¼‰
     await loadBookDetail(bookId, { includeBasic: true, includeTasks:true })
     initializeTasks(allTasks.value)
     
+    // åœ¨ä»»åŠ¡åˆå§‹åŒ–åï¼Œåˆå§‹åŒ–æ’åºçŠ¶æ€
+    initializeSortFromStorage()
+    
     // å¦‚æœä»åˆ—è¡¨é¡µè·³è½¬è¿‡æ¥ï¼Œè®¾ç½®é»˜è®¤ç­›é€‰
     if (options.filter === 'all') {
       setActiveFilter('all')